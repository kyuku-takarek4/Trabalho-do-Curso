<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Usuário</title>
    <link rel="stylesheet" href="css/cadastro.css"> <!-- Link para o arquivo CSS -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap">
    <link rel="stylesheet" href="css/estilo.css">
</head>
<body>
 <div>
    <div class="mamo"><p class="TituloDeCadastro">Cadastre-se</p></div> 
        <div class="cadastrop">
            <div class="cadastro">   
                
                <p>Nome</p>
                <input class="texto" type="text" id="nome" name="nome" required placeholder="Nome">
                
                <p>E-mail</p>
                <input class="texto" type="email" id="email" name="email" required placeholder="E-mail">
                
                <p>Senha</p>
                <input class="texto" type="password" id="senha" name="senha" required placeholder="Senha">
                
                <p>Confirmar Senha</p>    
                <input class="texto" type="password" id="confirmar_senha" name="confirmar_senha" required placeholder="Confirmar Senha">
                
                <p>Telefone/Contato</p>
                <input class="texto" type="text" id="telefone" name="telefone" required placeholder="(+DDD) Número">
                
                <p>CNPJ</p>
                <input class="texto" type="text" id="cnpj" name="CNPJ" required placeholder="CNPJ">
                
                <p>Endereço</p>
                <input class="texto" type="text" id="endereco" name="Endereço" required placeholder="Endereço">
                 
                <p>Representante</p>
                <input class="texto" type="text" id="representante" name="Representante" required placeholder="Representante">
                
             </div>
           
                    <div class="botoes">
                        <button type="submit" class="butao_de_voltar_1">Voltar</button> 
                        <button onclick="cadastrar()" class="butao_de_cadastrar">Cadastrar</button>
                    </div>
        </div>
                
  </div>     
                <script>
                function cadastrar(){
                    const nome = document.getElementById('nome').value;
                    const email = document.getElementById('email').value;
                    const senha = document.getElementById('senha').value;
                    const telefone = document.getElementById('telefone').value;
                    const cnpj = document.getElementById('cnpj').value;
                    const endereco = document.getElementById('endereco').value;
                    const representante = document.getElementById('representante').value;

                    const usuario = {
                        nome: nome,
                        email: email,
                        senha: senha,
                        telefone: parseInt(telefone, 15),
                        cnpj: cnpj,
                        endereco: endereco,
                        representante: representante
                    };

            fetch('http://localhost:3000/api/usuarios', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(usuario)
            })
                .then(response => {
                    if (response.ok) {
                        return response.json();
                    }
                    throw new Error('Erro ao cadastrar a pessoa');
                })
                .then(data => {
                    console.log('Pessoa cadastrada com sucesso:', data);
                    // Limpar os campos de entrada após o envio
                    document.getElementById('nome').value = '';
                    document.getElementById('email').value = '';
                    document.getElementById('senha').value = '';
                    document.getElementById('telefone').value = '';
                    document.getElementById('cnpj').value = '';
                    document.getElementById('endereco').value = '';
                    document.getElementById('representante').value = '';
                })
                .catch(error => {
                    console.error('Erro:', error);
                });
                }
                </script>
</body>
</html>
